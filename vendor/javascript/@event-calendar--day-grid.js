import{derived as e,writable as t}from"svelte/store";import{cloneDate as l,subtractDay as n,addDay as o,setContent as i,keyEnter as a,helperEvent as r,toEventWithLocalDates as s,toViewWithLocalDates as c,task as u,rect as d,ancestor as f,repositionEvent as h,height as p,max as $,resourceBackgroundColor as g,resourceTextColor as _,bgEvent as m,createEventClasses as y,createEventContent as v,toISOString as k,outsideEvent as b,datesEqual as w,assign as x,createEventChunk as C,runReposition as D,setPayload as E,debounce as M,eventIntersects as T,prepareEventChunks as H,btnTextMonth as P,themeView as z,intl as F}from"@event-calendar/core";import{element as U,space as B,attr as L,insert as S,append as j,action_destroyer as A,is_function as G,detach as O,ensure_array_like as q,noop as V,destroy_each as W,component_subscribe as N,SvelteComponent as I,init as J,safe_not_equal as K,construct_svelte_component as Q,create_component as R,mount_component as X,listen as Y,group_outros as Z,transition_out as ee,destroy_component as te,check_outros as le,transition_in as ne,run_all as oe,binding_callbacks as ie,empty as ae,text as re,stop_propagation as se,update_keyed_each as ce,outro_and_destroy_block as ue,set_store_value as de,bubble as fe}from"svelte/internal";import{getContext as he,onMount as pe,afterUpdate as $e,tick as ge}from"svelte";function days(t){return e([t.date,t.firstDay,t.hiddenDays],(([e,t,i])=>{let a=[];let r=l(e);let s=7;while(r.getUTCDay()!==t&&s){n(r);--s}for(let e=0;e<7;++e){i.includes(r.getUTCDay())||a.push(l(r));o(r)}return a}))}function get_each_context$4(e,t,l){const n=e.slice();n[8]=t[l];return n}function create_each_block$4(e){let t;let l;let n;let o;let a;let r;let s;let c;return{c(){t=U("div");l=U("span");a=B();L(l,"aria-label",n=e[2].format(e[8]));L(t,"class",r=e[0].day+" "+e[0].weekdays?.[e[8].getUTCDay()]);L(t,"role","columnheader")},m(n,r){S(n,t,r);j(t,l);j(t,a);if(!s){c=A(o=i.call(null,l,e[3].format(e[8])));s=true}},p(i,a){e=i;a&6&&n!==(n=e[2].format(e[8]))&&L(l,"aria-label",n);o&&G(o.update)&&a&10&&o.update.call(null,e[3].format(e[8]));a&3&&r!==(r=e[0].day+" "+e[0].weekdays?.[e[8].getUTCDay()])&&L(t,"class",r)},d(e){e&&O(t);s=false;c()}}}function create_fragment$6(e){let t;let l;let n;let o;let i;let a;let r;let s=q(e[1]);let c=[];for(let t=0;t<s.length;t+=1)c[t]=create_each_block$4(get_each_context$4(e,s,t));return{c(){t=U("div");l=U("div");for(let e=0;e<c.length;e+=1)c[e].c();o=B();i=U("div");L(l,"class",n=e[0].days);L(l,"role","row");L(i,"class",a=e[0].hiddenScroll);L(t,"class",r=e[0].header)},m(e,n){S(e,t,n);j(t,l);for(let e=0;e<c.length;e+=1)c[e]&&c[e].m(l,null);j(t,o);j(t,i)},p(e,[o]){if(o&15){s=q(e[1]);let t;for(t=0;t<s.length;t+=1){const n=get_each_context$4(e,s,t);if(c[t])c[t].p(n,o);else{c[t]=create_each_block$4(n);c[t].c();c[t].m(l,null)}}for(;t<c.length;t+=1)c[t].d(1);c.length=s.length}o&1&&n!==(n=e[0].days)&&L(l,"class",n);o&1&&a!==(a=e[0].hiddenScroll)&&L(i,"class",a);o&1&&r!==(r=e[0].header)&&L(t,"class",r)},i:V,o:V,d(e){e&&O(t);W(c,e)}}}function instance$5(e,t,l){let n;let o;let i;let a;let{theme:r,_intlDayHeader:s,_intlDayHeaderAL:c,_days:u}=he("state");N(e,r,(e=>l(0,n=e)));N(e,s,(e=>l(3,a=e)));N(e,c,(e=>l(2,i=e)));N(e,u,(e=>l(1,o=e)));return[n,o,i,a,r,s,c,u]}class Header extends I{constructor(e){super();J(this,e,instance$5,create_fragment$6,K,{})}}function create_fragment$5(e){let t;let l;let n;let o;let s;let c;let u;let d;let f;let h;let p;var $=e[8].resizer;function switch_props(e,t){return{props:{event:e[0]}}}if($){c=Q($,switch_props(e));c.$on("pointerdown",(function(){G(e[32](e[8],"x"))&&e[32](e[8],"x").apply(this,arguments)}))}return{c(){t=U("article");l=U("div");s=B();c&&R(c.$$.fragment);L(l,"class",n=e[2].eventBody);L(t,"class",e[4]);L(t,"style",e[5]);L(t,"role",u=e[7]?"button":void 0);L(t,"tabindex",d=e[7]?0:void 0)},m(n,u){S(n,t,u);j(t,l);j(t,s);c&&X(c,t,null);e[51](t);f=true;if(!h){p=[A(o=i.call(null,l,e[6])),Y(t,"click",(function(){G(e[7]||void 0)&&(e[7]||void 0).apply(this,arguments)})),Y(t,"keydown",(function(){G(e[7]&&a(e[7]))&&(e[7]&&a(e[7])).apply(this,arguments)})),Y(t,"mouseenter",(function(){G(e[31](e[9],e[1]))&&e[31](e[9],e[1]).apply(this,arguments)})),Y(t,"mouseleave",(function(){G(e[31](e[10],e[1]))&&e[31](e[10],e[1]).apply(this,arguments)})),Y(t,"pointerdown",(function(){G(!r(e[1])&&e[32](e[8]))&&(!r(e[1])&&e[32](e[8])).apply(this,arguments)}))];h=true}},p(i,a){e=i;(!f||a[0]&4&&n!==(n=e[2].eventBody))&&L(l,"class",n);o&&G(o.update)&&a[0]&64&&o.update.call(null,e[6]);if(a[0]&256&&$!==($=e[8].resizer)){if(c){Z();const e=c;ee(e.$$.fragment,1,0,(()=>{te(e,1)}));le()}if($){c=Q($,switch_props(e));c.$on("pointerdown",(function(){G(e[32](e[8],"x"))&&e[32](e[8],"x").apply(this,arguments)}));R(c.$$.fragment);ne(c.$$.fragment,1);X(c,t,null)}else c=null}else if($){const t={};a[0]&1&&(t.event=e[0]);c.$set(t)}(!f||a[0]&16)&&L(t,"class",e[4]);(!f||a[0]&32)&&L(t,"style",e[5]);(!f||a[0]&128&&u!==(u=e[7]?"button":void 0))&&L(t,"role",u);(!f||a[0]&128&&d!==(d=e[7]?0:void 0))&&L(t,"tabindex",d)},i(e){if(!f){c&&ne(c.$$.fragment,e);f=true}},o(e){c&&ee(c.$$.fragment,e);f=false},d(l){l&&O(t);c&&te(c);e[51](null);h=false;oe(p)}}}function instance$4(e,t,l){let n;let o;let i;let a;let k;let b;let w;let x;let C;let D;let E;let M;let T;let H;let P;let z;let F;let U;let B;let L;let{chunk:S}=t;let{longChunks:j={}}=t;let{inPopup:A=false}=t;let{dates:O=[]}=t;let{dayMaxEvents:q,displayEventEnd:V,eventAllUpdated:W,eventBackgroundColor:I,eventTextColor:J,eventClick:K,eventColor:Q,eventContent:R,eventClassNames:X,eventDidMount:Y,eventMouseEnter:Z,eventMouseLeave:ee,resources:te,theme:le,_view:ne,_intlEventTime:oe,_interaction:ae,_iClasses:re,_hiddenEvents:se,_popupDate:ce,_tasks:ue}=he("state");N(e,q,(e=>l(54,i=e)));N(e,V,(e=>l(44,M=e)));N(e,W,(e=>l(56,w=e)));N(e,I,(e=>l(50,U=e)));N(e,J,(e=>l(47,P=e)));N(e,K,(e=>l(40,n=e)));N(e,Q,(e=>l(49,F=e)));N(e,R,(e=>l(43,E=e)));N(e,X,(e=>l(45,T=e)));N(e,Y,(e=>l(57,x=e)));N(e,Z,(e=>l(9,B=e)));N(e,ee,(e=>l(10,L=e)));N(e,te,(e=>l(48,z=e)));N(e,le,(e=>l(2,D=e)));N(e,ne,(e=>l(41,b=e)));N(e,oe,(e=>l(42,C=e)));N(e,ae,(e=>l(8,k=e)));N(e,re,(e=>l(46,H=e)));N(e,se,(e=>l(53,o=e)));N(e,ce,(e=>l(55,a=e)));let de;let fe;let ge;let _e;let me;let ye;let ve=1;let ke=false;let be;let we;pe((()=>{G(x)&&x({event:s(fe),timeText:ye,el:de,view:c(b)})}));$e((()=>{G(w)&&!r(be)&&u((()=>w({view:c(b)})),"eau",ue)}));function createHandler(e,t){return!r(t)&&G(e)?t=>e({event:s(fe),el:de,jsEvent:t,view:c(b)}):void 0}function createDragHandler(e,t){return e.action?e=>k.action.drag(fe,e,t,A?a:null,[d(de).top-d(f(de,1)).top,O]):void 0}function reposition(){if(de){l(38,ve=h(S,j,p(de)));i===true?hide():l(39,ke=false)}}function hide(){let e=f(de,2);let t=p(e)-p(e.firstElementChild)-footHeight(e);l(39,ke=S.bottom>t);let n=false;for(let e of S.dates){let t=o[e.getTime()];if(t){let e=t.size;ke?t.add(S.event):t.delete(S.event);e!==t.size&&(n=true)}}n&&se.set(o)}function footHeight(e){let t=0;for(let l=0;l<S.days;++l){t=$(t,p(e.lastElementChild));e=e.nextElementSibling;if(!e)break}return t}function article_binding(e){ie[e?"unshift":"push"]((()=>{de=e;l(3,de)}))}e.$$set=e=>{"chunk"in e&&l(33,S=e.chunk);"longChunks"in e&&l(34,j=e.longChunks);"inPopup"in e&&l(35,A=e.inPopup);"dates"in e&&l(36,O=e.dates)};e.$$.update=()=>{e.$$.dirty[1]&4&&l(0,fe=S.event);if(e.$$.dirty[0]&39|e.$$.dirty[1]&1033604){l(1,be=fe.display);let e=fe.backgroundColor||g(fe,z)||U||F;let t=fe.textColor||_(fe,z)||P;if(m(be))l(5,_e=`width:calc(${S.days*100}% + ${S.days-1}px);`);else{let e=ve;if(fe._margin){let[t,l]=fe._margin;S.date>=l[0]&&S.date<=l.at(-1)&&(e=t)}l(5,_e=`width:calc(${S.days*100}% + ${7*(S.days-1)}px);margin-top:${e}px;`)}e&&l(5,_e+=`background-color:${e};`);t&&l(5,_e+=`color:${t};`);ke&&l(5,_e+="visibility:hidden;");l(5,_e+=fe.styles.join(";"));l(4,ge=[m(be)?D.bgEvent:D.event,...H([],fe),...y(T,fe,b)].join(" "))}e.$$.dirty[0]&4|e.$$.dirty[1]&15364&&l(6,[ye,me]=v(S,M,E,D,C,b),me);e.$$.dirty[0]&2|e.$$.dirty[1]&512&&l(7,we=createHandler(n,be))};return[fe,be,D,de,ge,_e,me,we,k,B,L,q,V,W,I,J,K,Q,R,X,Y,Z,ee,te,le,ne,oe,ae,re,se,ce,createHandler,createDragHandler,S,j,A,O,reposition,ve,ke,n,b,C,E,M,T,H,P,z,F,U,article_binding]}class Event extends I{constructor(e){super();J(this,e,instance$4,create_fragment$5,K,{chunk:33,longChunks:34,inPopup:35,dates:36,reposition:37},null,[-1,-1])}get reposition(){return this.$$.ctx[37]}}function get_each_context$3(e,t,l){const n=e.slice();n[20]=t[l];return n}function create_each_block$3(e,t){let l;let n;let o;n=new Event({props:{chunk:t[20],inPopup:true}});return{key:e,first:null,c(){l=ae();R(n.$$.fragment);this.first=l},m(e,t){S(e,l,t);X(n,e,t);o=true},p(e,l){t=e;const o={};l&1&&(o.chunk=t[20]);n.$set(o)},i(e){if(!o){ne(n.$$.fragment,e);o=true}},o(e){ee(n.$$.fragment,e);o=false},d(e){e&&O(l);te(n,e)}}}function create_fragment$4(e){let t;let l;let n;let o;let r;let s;let c;let u;let d;let f;let h;let p;let $=[];let g=new Map;let _;let m;let y;let v;let w;let x=q(e[0]);const get_key=e=>e[20].event;for(let t=0;t<x.length;t+=1){let l=get_each_context$3(e,x,t);let n=get_key(l);g.set(n,$[t]=create_each_block$3(n,l))}return{c(){t=U("div");l=U("div");n=U("time");s=B();c=U("a");u=re("Ã—");h=B();p=U("div");for(let e=0;e<$.length;e+=1)$[e].c();L(n,"datetime",o=k(e[3],10));L(c,"role","button");L(c,"tabindex","0");L(c,"aria-label",d=e[6].close);L(l,"class",f=e[4].dayHead);L(p,"class",_=e[4].events);L(t,"class",m=e[4].popup);L(t,"style",e[2])},m(o,d){S(o,t,d);j(t,l);j(l,n);j(l,s);j(l,c);j(c,u);j(t,h);j(t,p);for(let e=0;e<$.length;e+=1)$[e]&&$[e].m(p,null);e[16](t);y=true;if(!v){w=[A(r=i.call(null,n,e[5].format(e[3]))),Y(c,"click",se(e[13])),Y(c,"keydown",a(e[13])),A(b.call(null,t,"pointerdown")),Y(t,"pointerdown",se(e[15])),Y(t,"pointerdownoutside",e[14])];v=true}},p(e,[i]){(!y||i&8&&o!==(o=k(e[3],10)))&&L(n,"datetime",o);r&&G(r.update)&&i&40&&r.update.call(null,e[5].format(e[3]));(!y||i&64&&d!==(d=e[6].close))&&L(c,"aria-label",d);(!y||i&16&&f!==(f=e[4].dayHead))&&L(l,"class",f);if(i&1){x=q(e[0]);Z();$=ce($,i,get_key,1,e,x,g,p,ue,create_each_block$3,null,get_each_context$3);le()}(!y||i&16&&_!==(_=e[4].events))&&L(p,"class",_);(!y||i&16&&m!==(m=e[4].popup))&&L(t,"class",m);(!y||i&4)&&L(t,"style",e[2])},i(e){if(!y){for(let e=0;e<x.length;e+=1)ne($[e]);y=true}},o(e){for(let e=0;e<$.length;e+=1)ee($[e]);y=false},d(l){l&&O(t);for(let e=0;e<$.length;e+=1)$[e].d();e[16](null);v=false;oe(w)}}}function instance$3(e,t,l){let n;let o;let i;let a;let r;let s;let{buttonText:c,theme:u,_interaction:h,_intlDayPopover:p,_popupDate:$,_popupChunks:g}=he("state");N(e,c,(e=>l(6,s=e)));N(e,u,(e=>l(4,a=e)));N(e,h,(e=>l(17,n=e)));N(e,p,(e=>l(5,r=e)));N(e,$,(e=>l(3,o=e)));N(e,g,(e=>l(0,i=e)));let _;let m="";function position(){let e=f(_,1);let t=f(e,3);let n=d(_);let o=d(e);let i=d(t);l(2,m="");let a;if(n.width>=i.width){a=i.left-o.left;let e=o.right-i.right;l(2,m+=`right:${e}px;`)}else{a=(o.width-n.width)/2;o.left+a<i.left?a=i.left-o.left:o.left+a+n.width>i.right&&(a=i.right-o.left-n.width)}l(2,m+=`left:${a}px;`);let r;if(n.height>=i.height){r=i.top-o.top;let e=o.bottom-i.bottom;l(2,m+=`bottom:${e}px;`)}else{r=(o.height-n.height)/2;o.top+r<i.top?r=i.top-o.top:o.top+r+n.height>i.bottom&&(r=i.bottom-o.top-n.height)}l(2,m+=`top:${r}px;`)}function reposition(){if(_){l(2,m="");ge().then((()=>{i.length?position():close()}))}}function close(e){de($,o=null,o)}function handlePointerDownOutside(e){close();n.action?.noClick()}function pointerdown_handler(t){fe.call(this,e,t)}function div2_binding(e){ie[e?"unshift":"push"]((()=>{_=e;l(1,_)}))}e.$$.update=()=>{e.$$.dirty&1&&i&&reposition()};return[i,_,m,o,a,r,s,c,u,h,p,$,g,close,handlePointerDownOutside,pointerdown_handler,div2_binding]}class Popup extends I{constructor(e){super();J(this,e,instance$3,create_fragment$4,K,{})}}function get_each_context$2(e,t,l){const n=e.slice();n[44]=t[l];n[45]=t;n[46]=l;return n}function get_each_context_1(e,t,l){const n=e.slice();n[44]=t[l];return n}function create_each_block_1(e,t){let l;let n;let o;n=new Event({props:{chunk:t[44]}});return{key:e,first:null,c(){l=ae();R(n.$$.fragment);this.first=l},m(e,t){S(e,l,t);X(n,e,t);o=true},p(e,l){t=e;const o={};l[0]&256&&(o.chunk=t[44]);n.$set(o)},i(e){if(!o){ne(n.$$.fragment,e);o=true}},o(e){ee(n.$$.fragment,e);o=false},d(e){e&&O(l);te(n,e)}}}function create_if_block_3(e){let t;let l;let n;let o;l=new Event({props:{chunk:e[2][2]}});return{c(){t=U("div");R(l.$$.fragment);L(t,"class",n=e[14].events)},m(e,n){S(e,t,n);X(l,t,null);o=true},p(e,i){const a={};i[0]&4&&(a.chunk=e[2][2]);l.$set(a);(!o||i[0]&16384&&n!==(n=e[14].events))&&L(t,"class",n)},i(e){if(!o){ne(l.$$.fragment,e);o=true}},o(e){ee(l.$$.fragment,e);o=false},d(e){e&&O(t);te(l)}}}function create_if_block_2(e){let t;let l;let n;let o;l=new Event({props:{chunk:e[2][0]}});return{c(){t=U("div");R(l.$$.fragment);L(t,"class",n=e[14].events+" "+e[14].preview)},m(e,n){S(e,t,n);X(l,t,null);o=true},p(e,i){const a={};i[0]&4&&(a.chunk=e[2][0]);l.$set(a);(!o||i[0]&16384&&n!==(n=e[14].events+" "+e[14].preview))&&L(t,"class",n)},i(e){if(!o){ne(l.$$.fragment,e);o=true}},o(e){ee(l.$$.fragment,e);o=false},d(e){e&&O(t);te(l)}}}function create_each_block$2(e,t){let l;let n;let o=t[46];let i;const assign_event=()=>t[38](n,o);const unassign_event=()=>t[38](null,o);let a={chunk:t[44],longChunks:t[1],dates:t[3]};n=new Event({props:a});assign_event();return{key:e,first:null,c(){l=ae();R(n.$$.fragment);this.first=l},m(e,t){S(e,l,t);X(n,e,t);i=true},p(e,l){t=e;if(o!==t[46]){unassign_event();o=t[46];assign_event()}const i={};l[0]&32&&(i.chunk=t[44]);l[0]&2&&(i.longChunks=t[1]);l[0]&8&&(i.dates=t[3]);n.$set(i)},i(e){if(!i){ne(n.$$.fragment,e);i=true}},o(e){ee(n.$$.fragment,e);i=false},d(e){e&&O(l);unassign_event();te(n,e)}}}function create_if_block_1(e){let t;let l;t=new Popup({});return{c(){R(t.$$.fragment)},m(e,n){X(t,e,n);l=true},i(e){if(!l){ne(t.$$.fragment,e);l=true}},o(e){ee(t.$$.fragment,e);l=false},d(e){te(t,e)}}}function create_if_block(e){let t;let l;let n;let o;return{c(){t=U("a");L(t,"role","button");L(t,"tabindex","0");L(t,"aria-haspopup","true")},m(r,s){S(r,t,s);if(!n){o=[Y(t,"click",se(e[27])),Y(t,"keydown",a(e[27])),Y(t,"pointerdown",se(e[37])),A(l=i.call(null,t,e[12]))];n=true}},p(e,t){l&&G(l.update)&&t[0]&4096&&l.update.call(null,e[12])},d(e){e&&O(t);n=false;oe(o)}}}function create_fragment$3(e){let t;let l;let n;let o;let a;let r;let s;let c=[];let u=new Map;let d;let f;let h=e[2][2]&&w(e[2][2].date,e[0]);let p;let $=e[2][0]&&w(e[2][0].date,e[0]);let g;let _;let m=[];let y=new Map;let v;let b;let x;let C;let D;let E;let M;let T;let H;let P=q(e[8]);const get_key=e=>e[44].event;for(let t=0;t<P.length;t+=1){let l=get_each_context_1(e,P,t);let n=get_key(l);u.set(n,c[t]=create_each_block_1(n,l))}let z=h&&create_if_block_3(e);let F=$&&create_if_block_2(e);let V=q(e[5]);const get_key_1=e=>e[44].event;for(let t=0;t<V.length;t+=1){let l=get_each_context$2(e,V,t);let n=get_key_1(l);y.set(n,m[t]=create_each_block$2(n,l))}let W=e[7]&&create_if_block_1();let N=e[6].size&&create_if_block(e);return{c(){t=U("div");l=U("time");r=B();s=U("div");for(let e=0;e<c.length;e+=1)c[e].c();f=B();z&&z.c();p=B();F&&F.c();g=B();_=U("div");for(let e=0;e<m.length;e+=1)m[e].c();b=B();W&&W.c();x=B();C=U("div");N&&N.c();L(l,"class",n=e[14].dayHead);L(l,"datetime",o=k(e[0],10));L(s,"class",d=e[14].bgEvents);L(_,"class",v=e[14].events);L(C,"class",D=e[14].dayFoot);L(t,"class",E=e[14].day+" "+e[14].weekdays?.[e[0].getUTCDay()]+(e[9]?" "+e[14].today:"")+(e[10]?" "+e[14].otherMonth:"")+(e[11]?" "+e[14].highlight:""));L(t,"role","cell")},m(n,o){S(n,t,o);j(t,l);j(t,r);j(t,s);for(let e=0;e<c.length;e+=1)c[e]&&c[e].m(s,null);j(t,f);z&&z.m(t,null);j(t,p);F&&F.m(t,null);j(t,g);j(t,_);for(let e=0;e<m.length;e+=1)m[e]&&m[e].m(_,null);j(t,b);W&&W.m(t,null);j(t,x);j(t,C);N&&N.m(C,null);e[39](t);M=true;if(!T){H=[A(a=i.call(null,l,e[16].format(e[0]))),Y(t,"pointerleave",(function(){G(e[15].pointer?.leave)&&e[15].pointer?.leave.apply(this,arguments)})),Y(t,"pointerdown",(function(){G(e[15].action?.select)&&e[15].action?.select.apply(this,arguments)}))];T=true}},p(i,r){e=i;(!M||r[0]&16384&&n!==(n=e[14].dayHead))&&L(l,"class",n);(!M||r[0]&1&&o!==(o=k(e[0],10)))&&L(l,"datetime",o);a&&G(a.update)&&r[0]&65537&&a.update.call(null,e[16].format(e[0]));if(r[0]&256){P=q(e[8]);Z();c=ce(c,r,get_key,1,e,P,u,s,ue,create_each_block_1,null,get_each_context_1);le()}(!M||r[0]&16384&&d!==(d=e[14].bgEvents))&&L(s,"class",d);r[0]&5&&(h=e[2][2]&&w(e[2][2].date,e[0]));if(h)if(z){z.p(e,r);r[0]&5&&ne(z,1)}else{z=create_if_block_3(e);z.c();ne(z,1);z.m(t,p)}else if(z){Z();ee(z,1,1,(()=>{z=null}));le()}r[0]&5&&($=e[2][0]&&w(e[2][0].date,e[0]));if($)if(F){F.p(e,r);r[0]&5&&ne(F,1)}else{F=create_if_block_2(e);F.c();ne(F,1);F.m(t,g)}else if(F){Z();ee(F,1,1,(()=>{F=null}));le()}if(r[0]&8234){V=q(e[5]);Z();m=ce(m,r,get_key_1,1,e,V,y,_,ue,create_each_block$2,null,get_each_context$2);le()}(!M||r[0]&16384&&v!==(v=e[14].events))&&L(_,"class",v);if(e[7])if(W)r[0]&128&&ne(W,1);else{W=create_if_block_1();W.c();ne(W,1);W.m(t,x)}else if(W){Z();ee(W,1,1,(()=>{W=null}));le()}if(e[6].size)if(N)N.p(e,r);else{N=create_if_block(e);N.c();N.m(C,null)}else if(N){N.d(1);N=null}(!M||r[0]&16384&&D!==(D=e[14].dayFoot))&&L(C,"class",D);(!M||r[0]&19969&&E!==(E=e[14].day+" "+e[14].weekdays?.[e[0].getUTCDay()]+(e[9]?" "+e[14].today:"")+(e[10]?" "+e[14].otherMonth:"")+(e[11]?" "+e[14].highlight:"")))&&L(t,"class",E)},i(e){if(!M){for(let e=0;e<P.length;e+=1)ne(c[e]);ne(z);ne(F);for(let e=0;e<V.length;e+=1)ne(m[e]);ne(W);M=true}},o(e){for(let e=0;e<c.length;e+=1)ee(c[e]);ee(z);ee(F);for(let e=0;e<m.length;e+=1)ee(m[e]);ee(W);M=false},d(l){l&&O(t);for(let e=0;e<c.length;e+=1)c[e].d();z&&z.d();F&&F.d();for(let e=0;e<m.length;e+=1)m[e].d();W&&W.d();N&&N.d();e[39](null);T=false;oe(H)}}}function instance$2(e,t,n){let i;let a;let r;let s;let c;let u;let d;let f;let h;let p;let{date:$}=t;let{chunks:g}=t;let{bgChunks:_}=t;let{longChunks:m}=t;let{iChunks:y=[]}=t;let{dates:v}=t;let{date:k,dayMaxEvents:b,highlightedDates:M,moreLinkContent:T,theme:H,_hiddenEvents:P,_intlDayCell:z,_popupDate:F,_popupChunks:U,_today:B,_interaction:L,_queue:S}=he("state");N(e,k,(e=>n(35,u=e)));N(e,M,(e=>n(34,c=e)));N(e,T,(e=>n(32,r=e)));N(e,H,(e=>n(14,f=e)));N(e,P,(e=>n(33,s=e)));N(e,z,(e=>n(16,p=e)));N(e,F,(e=>n(31,a=e)));N(e,U,(e=>n(40,i=e)));N(e,B,(e=>n(36,d=e)));N(e,L,(e=>n(15,h=e)));let j;let A,O;let q;let V;let W;let I=new Set;let J="";let K;let Q=[];function showMore(){de(F,a=$,a)}function setPopupChunks(){let e=o(l($));let t=A.concat(m[$.getTime()]?.chunks||[]);de(U,i=t.map((t=>x({},t,C(t.event,$,e),{days:1,dates:[$]}))).sort(((e,t)=>e.top-t.top)),i)}function reposition(){D(Q,A)}function pointerdown_handler(t){fe.call(this,e,t)}function event_binding(e,t){ie[e?"unshift":"push"]((()=>{Q[t]=e;n(13,Q)}))}function div3_binding(e){ie[e?"unshift":"push"]((()=>{j=e;n(4,j)}))}e.$$set=e=>{"date"in e&&n(0,$=e.date);"chunks"in e&&n(28,g=e.chunks);"bgChunks"in e&&n(29,_=e.bgChunks);"longChunks"in e&&n(1,m=e.longChunks);"iChunks"in e&&n(2,y=e.iChunks);"dates"in e&&n(3,v=e.dates)};e.$$.update=()=>{if(e.$$.dirty[0]&805306465){n(5,A=[]);n(8,O=_.filter((e=>w(e.date,$))));I.clear();n(6,I),n(29,_),n(0,$),n(28,g),n(5,A);for(let e of g)w(e.date,$)&&A.push(e)}e.$$.dirty[0]&65&&de(P,s[$.getTime()]=I,s);e.$$.dirty[0]&1|e.$$.dirty[1]&32&&n(9,q=w($,d));if(e.$$.dirty[0]&1|e.$$.dirty[1]&24){n(10,V=$.getUTCMonth()!==u.getUTCMonth());n(11,W=c.some((e=>w(e,$))))}if(e.$$.dirty[0]&64|e.$$.dirty[1]&6&&s&&I.size){let e="+"+I.size+" more";n(12,J=r?G(r)?r({num:I.size,text:e}):r:e)}e.$$.dirty[0]&1|e.$$.dirty[1]&1&&n(7,K=a&&w($,a));e.$$.dirty[0]&162&&K&&m&&A&&ge().then(setPopupChunks);e.$$.dirty[0]&17&&j&&E(j,(()=>({allDay:true,date:$,resource:void 0,dayEl:j})))};return[$,m,y,v,j,A,I,K,O,q,V,W,J,Q,f,h,p,k,M,T,H,P,z,F,U,B,L,showMore,g,_,reposition,a,r,s,c,u,d,pointerdown_handler,event_binding,div3_binding]}class Day extends I{constructor(e){super();J(this,e,instance$2,create_fragment$3,K,{date:0,chunks:28,bgChunks:29,longChunks:1,iChunks:2,dates:3,reposition:30},null,[-1,-1])}get reposition(){return this.$$.ctx[30]}}function get_each_context$1(e,t,l){const n=e.slice();n[22]=t[l];n[23]=t;n[24]=l;return n}function create_each_block$1(e){let t;let l=e[24];let n;const assign_day=()=>e[19](t,l);const unassign_day=()=>e[19](null,l);let o={date:e[22],chunks:e[1],bgChunks:e[2],longChunks:e[3],iChunks:e[4],dates:e[0]};t=new Day({props:o});assign_day();return{c(){R(t.$$.fragment)},m(e,l){X(t,e,l);n=true},p(e,n){if(l!==e[24]){unassign_day();l=e[24];assign_day()}const o={};n&1&&(o.date=e[22]);n&2&&(o.chunks=e[1]);n&4&&(o.bgChunks=e[2]);n&8&&(o.longChunks=e[3]);n&16&&(o.iChunks=e[4]);n&1&&(o.dates=e[0]);t.$set(o)},i(e){if(!n){ne(t.$$.fragment,e);n=true}},o(e){ee(t.$$.fragment,e);n=false},d(e){unassign_day();te(t,e)}}}function create_fragment$2(e){let t;let l;let n;let o;let i;let a=q(e[0]);let r=[];for(let t=0;t<a.length;t+=1)r[t]=create_each_block$1(get_each_context$1(e,a,t));const out=e=>ee(r[e],1,1,(()=>{r[e]=null}));return{c(){t=U("div");for(let e=0;e<r.length;e+=1)r[e].c();L(t,"class",l=e[6].days);L(t,"role","row")},m(l,a){S(l,t,a);for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,null);n=true;if(!o){i=Y(window,"resize",e[12]);o=true}},p(e,[o]){if(o&63){a=q(e[0]);let l;for(l=0;l<a.length;l+=1){const n=get_each_context$1(e,a,l);if(r[l]){r[l].p(n,o);ne(r[l],1)}else{r[l]=create_each_block$1(n);r[l].c();ne(r[l],1);r[l].m(t,null)}}Z();for(l=a.length;l<r.length;l+=1)out(l);le()}(!n||o&64&&l!==(l=e[6].days))&&L(t,"class",l)},i(e){if(!n){for(let e=0;e<a.length;e+=1)ne(r[e]);n=true}},o(e){r=r.filter(Boolean);for(let e=0;e<r.length;e+=1)ee(r[e]);n=false},d(e){e&&O(t);W(r,e);o=false;i()}}}function instance$1(e,t,n){let i;let a;let r;let s;let c;let{dates:u}=t;let{_events:d,_iEvents:f,_queue2:h,_hiddenEvents:p,hiddenDays:$,theme:g}=he("state");N(e,d,(e=>n(18,s=e)));N(e,f,(e=>n(17,r=e)));N(e,p,(e=>n(15,i=e)));N(e,$,(e=>n(16,a=e)));N(e,g,(e=>n(6,c=e)));let _,y,v,k=[];let b;let w;let x=[];let E={};function reposition(){M((()=>D(x,u)),E,h)}function day_binding(e,t){ie[e?"unshift":"push"]((()=>{x[t]=e;n(5,x)}))}e.$$set=e=>{"dates"in e&&n(0,u=e.dates)};e.$$.update=()=>{if(e.$$.dirty&1){n(13,b=u[0]);n(14,w=o(l(u.at(-1))))}if(e.$$.dirty&352262){n(1,_=[]);n(2,y=[]);for(let e of s)if(T(e,b,w)){let t=C(e,b,w);m(e.display)?e.allDay&&y.push(t):_.push(t)}H(y,a);n(3,v=H(_,a));reposition()}e.$$.dirty&221184&&n(4,k=r.map((e=>{let t;if(e&&T(e,b,w)){t=C(e,b,w);H([t],a)}else t=null;return t})));e.$$.dirty&32768&&i&&ge().then(reposition)};return[u,_,y,v,k,x,c,d,f,p,$,g,reposition,b,w,i,a,r,s,day_binding]}class Week extends I{constructor(e){super();J(this,e,instance$1,create_fragment$2,K,{dates:0})}}function get_each_context(e,t,l){const n=e.slice();n[15]=t[l];return n}function create_each_block(e){let t;let l;t=new Week({props:{dates:e[15]}});return{c(){R(t.$$.fragment)},m(e,n){X(t,e,n);l=true},p(e,l){const n={};l&1&&(n.dates=e[15]);t.$set(n)},i(e){if(!l){ne(t.$$.fragment,e);l=true}},o(e){ee(t.$$.fragment,e);l=false},d(e){te(t,e)}}}function create_fragment$1(e){let t;let l;let n;let o;let i;let a=q(e[0]);let r=[];for(let t=0;t<a.length;t+=1)r[t]=create_each_block(get_each_context(e,a,t));const out=e=>ee(r[e],1,1,(()=>{r[e]=null}));return{c(){t=U("div");l=U("div");for(let e=0;e<r.length;e+=1)r[e].c();L(l,"class",n=e[2].content);L(t,"class",o=e[2].body+(e[1]===true?" "+e[2].uniform:""))},m(n,o){S(n,t,o);j(t,l);for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(l,null);e[13](t);i=true},p(e,[s]){if(s&1){a=q(e[0]);let t;for(t=0;t<a.length;t+=1){const n=get_each_context(e,a,t);if(r[t]){r[t].p(n,s);ne(r[t],1)}else{r[t]=create_each_block(n);r[t].c();ne(r[t],1);r[t].m(l,null)}}Z();for(t=a.length;t<r.length;t+=1)out(t);le()}(!i||s&4&&n!==(n=e[2].content))&&L(l,"class",n);(!i||s&6&&o!==(o=e[2].body+(e[1]===true?" "+e[2].uniform:"")))&&L(t,"class",o)},i(e){if(!i){for(let e=0;e<a.length;e+=1)ne(r[e]);i=true}},o(e){r=r.filter(Boolean);for(let e=0;e<r.length;e+=1)ee(r[e]);i=false},d(l){l&&O(t);W(r,l);e[13](null)}}}function instance(e,t,l){let n;let o;let i;let a;let r;let s;let{_bodyEl:c,_viewDates:u,_hiddenEvents:d,dayMaxEvents:f,hiddenDays:h,theme:p}=he("state");N(e,c,(e=>l(3,s=e)));N(e,u,(e=>l(11,n=e)));N(e,d,(e=>l(14,i=e)));N(e,f,(e=>l(1,o=e)));N(e,h,(e=>l(12,a=e)));N(e,p,(e=>l(2,r=e)));let $;let g;function div1_binding(e){ie[e?"unshift":"push"]((()=>{s=e;c.set(s)}))}e.$$.update=()=>{if(e.$$.dirty&7171){l(0,$=[]);l(10,g=7-a.length);de(d,i={},i);for(let e=0;e<n.length/g;++e){let t=[];for(let l=0;l<g;++l)t.push(n[e*g+l]);$.push(t)}}};return[$,o,r,s,c,u,d,f,h,p,g,n,a,div1_binding]}class Body extends I{constructor(e){super();J(this,e,instance,create_fragment$1,K,{})}}function create_fragment(e){let t;let l;let n;let o;t=new Header({});n=new Body({});return{c(){R(t.$$.fragment);l=B();R(n.$$.fragment)},m(e,i){X(t,e,i);S(e,l,i);X(n,e,i);o=true},p:V,i(e){if(!o){ne(t.$$.fragment,e);ne(n.$$.fragment,e);o=true}},o(e){ee(t.$$.fragment,e);ee(n.$$.fragment,e);o=false},d(e){e&&O(l);te(t,e);te(n,e)}}}class View extends I{constructor(e){super();J(this,e,null,create_fragment,K,{})}}var _e={createOptions(e){e.dayMaxEvents=false;e.dayCellFormat={day:"numeric"};e.dayPopoverFormat={month:"long",day:"numeric",year:"numeric"};e.moreLinkContent=void 0;e.buttonText.dayGridMonth="month";e.buttonText.close="Close";e.theme.uniform="ec-uniform";e.theme.dayFoot="ec-day-foot";e.theme.popup="ec-popup";e.view="dayGridMonth";e.views.dayGridMonth={buttonText:P,component:View,dayHeaderFormat:{weekday:"short"},dayHeaderAriaLabelFormat:{weekday:"long"},displayEventEnd:false,duration:{months:1},theme:z("ec-day-grid ec-month-view"),titleFormat:{year:"numeric",month:"long"}}},createStores(e){e._days=days(e);e._intlDayCell=F(e.locale,e.dayCellFormat);e._intlDayPopover=F(e.locale,e.dayPopoverFormat);e._hiddenEvents=t({});e._popupDate=t(null);e._popupChunks=t([])}};export{_e as default};

