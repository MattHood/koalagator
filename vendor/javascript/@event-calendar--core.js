import{run_all as e,is_function as t,identity as n,tick as r,element as o,text as a,attr as i,insert as l,append as s,listen as c,set_data as u,detach as d,action_destroyer as f,empty as h,ensure_array_like as v,noop as g,destroy_each as m,component_subscribe as p,set_store_value as _,SvelteComponent as y,init as D,safe_not_equal as b,create_component as w,mount_component as E,transition_in as $,transition_out as T,destroy_component as x,group_outros as k,check_outros as C,space as S,construct_svelte_component as L,set_style as R,get_current_component as M}from"svelte/internal";import{getContext as P,setContext as U,beforeUpdate as O,afterUpdate as I}from"svelte";import{derived as F,get as W,writable as B,readable as N}from"svelte/store";function keyEnter(e){return function(t){return t.key==="Enter"||t.key===" "&&!t.preventDefault()?e.call(this,t):void 0}}function setContent(e,t){let n={update(t){typeof t=="string"?e.innerText=t:t?.domNodes?e.replaceChildren(...t.domNodes):t?.html&&(e.innerHTML=t.html)}};n.update(t);return n}function outsideEvent(e,t){const handlePointerDown=n=>{e&&!e.contains(n.target)&&e.dispatchEvent(new CustomEvent(t+"outside",{detail:{jsEvent:n}}))};document.addEventListener(t,handlePointerDown,true);return{destroy(){document.removeEventListener(t,handlePointerDown,true)}}}const V=86400;function createDate(e=void 0){return e!==void 0?e instanceof Date?_fromLocalDate(e):_fromISOString(e):_fromLocalDate(new Date)}function createDuration(e){if(typeof e==="number")e={seconds:e};else if(typeof e==="string"){let t=0,n=2;for(let r of e.split(":",3))t+=parseInt(r,10)*Math.pow(60,n--);e={seconds:t}}else e instanceof Date&&(e={hours:e.getUTCHours(),minutes:e.getUTCMinutes(),seconds:e.getUTCSeconds()});let t=e.weeks||e.week||0;return{years:e.years||e.year||0,months:e.months||e.month||0,days:t*7+(e.days||e.day||0),seconds:(e.hours||e.hour||0)*60*60+(e.minutes||e.minute||0)*60+(e.seconds||e.second||0),inWeeks:!!t}}function cloneDate(e){return new Date(e.getTime())}function addDuration(e,t,n=1){e.setUTCFullYear(e.getUTCFullYear()+n*t.years);let r=e.getUTCMonth()+n*t.months;e.setUTCMonth(r);r%=12;r<0&&(r+=12);while(e.getUTCMonth()!==r)subtractDay(e);e.setUTCDate(e.getUTCDate()+n*t.days);e.setUTCSeconds(e.getUTCSeconds()+n*t.seconds);return e}function subtractDuration(e,t,n=1){return addDuration(e,t,-n)}function addDay(e,t=1){e.setUTCDate(e.getUTCDate()+t);return e}function subtractDay(e,t=1){return addDay(e,-t)}function setMidnight(e){e.setUTCHours(0,0,0,0);return e}function toLocalDate(e){return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())}function toISOString(e,t=19){return e.toISOString().substring(0,t)}function datesEqual(e,...t){return t.every((t=>e.getTime()===t.getTime()))}function nextClosestDay(e,t){let n=t-e.getUTCDay();e.setUTCDate(e.getUTCDate()+(n>=0?n:n+7));return e}function prevClosestDay(e,t){let n=t-e.getUTCDay();e.setUTCDate(e.getUTCDate()+(n<=0?n:n-7));return e}function noTimePart(e){return typeof e==="string"&&e.length<=10}function copyTime(e,t){e.setUTCHours(t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),0);return e}function toSeconds(e){return e.seconds}function nextDate(e,t){addDuration(e,t);return e}function prevDate(e,t,n){subtractDuration(e,t);if(n.length&&n.length<7)while(n.includes(e.getUTCDay()))subtractDay(e);return e}function _fromLocalDate(e){return new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()))}function _fromISOString(e){const t=e.match(/\d+/g);return new Date(Date.UTC(Number(t[0]),Number(t[1])-1,Number(t[2]),Number(t[3]||0),Number(t[4]||0),Number(t[5]||0)))}function debounce(e,t,n){n.update((n=>n.set(t,e)))}function flushDebounce(t){e(t);t.clear()}function task(e,t,n){t??=e;n.has(t)||n.set(t,setTimeout((()=>{n.delete(t);e()})))}function assign(...e){return Object.assign(...e)}function keys(e){return Object.keys(e)}function floor(e){return Math.floor(e)}function ceil(e){return Math.ceil(e)}function min(...e){return Math.min(...e)}function max(...e){return Math.max(...e)}function symbol(){return Symbol("ec")}function isArray(e){return Array.isArray(e)}function createElement(e,t,n,r=[]){let o=document.createElement(e);o.className=t;typeof n=="string"?o.innerText=n:n.domNodes?o.replaceChildren(...n.domNodes):n.html&&(o.innerHTML=n.html);for(let e of r)o.setAttribute(...e);return o}function hasYScroll(e){return e.scrollHeight>e.clientHeight}function rect(e){return e.getBoundingClientRect()}function ancestor(e,t){while(t--)e=e.parentElement;return e}function height(e){return rect(e).height}let A=symbol();function setPayload(e,t){e[A]=t}function hasPayload(e){return!!e?.[A]}function getPayload(e){return e[A]}function getElementWithPayload(e,t,n=document){for(let r of n.elementsFromPoint(e,t)){if(hasPayload(r))return r;if(r.shadowRoot){let n=getElementWithPayload(e,t,r.shadowRoot);if(n)return n}}return null}function createView(e,t,n,r){return{type:e,title:t,currentStart:n.start,currentEnd:n.end,activeStart:r.start,activeEnd:r.end,calendar:void 0}}function toViewWithLocalDates(e){e=assign({},e);e.currentStart=toLocalDate(e.currentStart);e.currentEnd=toLocalDate(e.currentEnd);e.activeStart=toLocalDate(e.activeStart);e.activeEnd=toLocalDate(e.activeEnd);return e}function listView(e){return e.startsWith("list")}function timelineView(e){return e.includes("Timeline")}let H=1;function createEvents(e){return e.map((e=>{let t={id:"id"in e?String(e.id):`{generated-${H++}}`,resourceIds:toArrayProp(e,"resourceId").map(String),allDay:e.allDay??(noTimePart(e.start)&&noTimePart(e.end)),start:createDate(e.start),end:createDate(e.end),title:e.title??"",editable:e.editable,startEditable:e.startEditable,durationEditable:e.durationEditable,display:e.display??"auto",extendedProps:e.extendedProps??{},backgroundColor:e.backgroundColor??e.color,textColor:e.textColor,classNames:toArrayProp(e,"className"),styles:toArrayProp(e,"style")};if(t.allDay){setMidnight(t.start);let e=cloneDate(t.end);setMidnight(t.end);datesEqual(t.end,e)&&!datesEqual(t.end,t.start)||addDay(t.end)}return t}))}function toArrayProp(e,t){let n=e[t+"s"]??e[t]??[];return isArray(n)?n:[n]}function createEventSources(e){return e.map((e=>({events:e.events,url:e.url&&e.url.trimEnd("&")||"",method:e.method&&e.method.toUpperCase()||"GET",extraParams:e.extraParams||{}})))}function createEventChunk(e,t,n){return{start:e.start>t?e.start:t,end:e.end<n?e.end:n,event:e}}function sortEventChunks(e){e.sort(((e,t)=>e.start-t.start||t.event.allDay-e.event.allDay))}function createEventContent(e,n,r,o,a,i){let l=a.formatRange(e.start,n&&e.event.display!=="pointer"?copyTime(cloneDate(e.start),e.end):e.start);let s;r&&(s=t(r)?r({event:toEventWithLocalDates(e.event),timeText:l,view:toViewWithLocalDates(i)}):r);if(s===void 0){let t;switch(e.event.display){case"background":t=[];break;case"pointer":t=[createTimeElement(l,e,o)];break;default:t=[...e.event.allDay?[]:[createTimeElement(l,e,o)],createElement("h4",o.eventTitle,e.event.title)]}s={domNodes:t}}return[l,s]}function createTimeElement(e,t,n){return createElement("time",n.eventTime,e,[["datetime",toISOString(t.start)]])}function createEventClasses(e,n,r){let o=n.classNames;if(e){t(e)&&(e=e({event:toEventWithLocalDates(n),view:toViewWithLocalDates(r)}));o=[...isArray(e)?e:[e],...o]}return o}function toEventWithLocalDates(e){return _cloneEvent(e,toLocalDate)}function cloneEvent(e){return _cloneEvent(e,cloneDate)}function _cloneEvent(e,t){e=assign({},e);e.start=t(e.start);e.end=t(e.end);return e}function prepareEventChunks(e,t){let n={};if(e.length){sortEventChunks(e);let r;for(let o of e){let e=[];let a=setMidnight(cloneDate(o.start));while(o.end>a){if(!t.includes(a.getUTCDay())){e.push(cloneDate(a));if(e.length>1){let e=a.getTime();n[e]?n[e].chunks.push(o):n[e]={sorted:false,chunks:[o]}}}addDay(a)}if(e.length){o.date=e[0];o.days=e.length;o.dates=e;o.start<e[0]&&(o.start=e[0]);let t=addDay(cloneDate(e.at(-1)));o.end>t&&(o.end=t)}else{o.date=setMidnight(cloneDate(o.start));o.days=1;o.dates=[o.date]}r&&datesEqual(r.date,o.date)&&(o.prev=r);r=o}}return n}function repositionEvent(e,t,n){e.top=0;e.prev&&(e.top=e.prev.bottom+1);e.bottom=e.top+n;let r=1;let o=e.date.getTime();if(t[o]){if(!t[o].sorted){t[o].chunks.sort(((e,t)=>e.top-t.top));t[o].sorted=true}for(let n of t[o].chunks)if(e.top<n.bottom&&e.bottom>n.top){let t=n.bottom-e.top+1;r+=t;e.top+=t;e.bottom+=t}}return r}function runReposition(e,t){e.length=t.length;let n=[];for(let t of e)n.push(t?.reposition?.());return n}
/**
 * Check whether the event intersects with the given date range and resource
 * @param event
 * @param start
 * @param end
 * @param [resource]
 * @return boolean
 */function eventIntersects(e,t,n,r){return e.start<n&&e.end>t&&(r===void 0||e.resourceIds.includes(r.id))}function helperEvent(e){return previewEvent(e)||ghostEvent(e)||pointerEvent(e)}function bgEvent(e){return e==="background"}function previewEvent(e){return e==="preview"}function ghostEvent(e){return e==="ghost"}function pointerEvent(e){return e==="pointer"}function btnTextDay(e){return btnText(e,"day")}function btnTextWeek(e){return btnText(e,"week")}function btnTextMonth(e){return btnText(e,"month")}function btnTextYear(e){return btnText(e,"year")}function btnText(e,t){return{...e,next:"Next "+t,prev:"Previous "+t}}function themeView(e){return t=>({...t,view:e})}function createResources(e){return e.map((e=>({id:String(e.id),title:e.title||"",eventBackgroundColor:e.eventBackgroundColor,eventTextColor:e.eventTextColor})))}function resourceBackgroundColor(e,t){return findResource(e,t)?.eventBackgroundColor}function resourceTextColor(e,t){return findResource(e,t)?.eventTextColor}function findResource(e,t){return t.find((t=>e.resourceIds.includes(t.id)))}function intl(e,n){return F([e,n],(([e,n])=>{let r=t(n)?{format:n}:new Intl.DateTimeFormat(e,n);return{format:e=>r.format(toLocalDate(e))}}))}function intlRange(e,n){return F([e,n],(([e,n])=>{let r;if(t(n))r=n;else{let t=new Intl.DateTimeFormat(e,n);r=(e,n)=>{if(e<=n)return t.formatRange(e,n);{let r=t.formatRangeToParts(n,e);let o="";let a=["startRange","endRange"];let i=[false,false];for(let e of r){let t=a.indexOf(e.source);if(t>=0){if(!i[t]){o+=_getParts(a[1-t],r);i[t]=true}}else o+=e.value}return o}}}return{formatRange:(e,t)=>r(toLocalDate(e),toLocalDate(t))}}))}function _getParts(e,t){let n="";for(let r of t)r.source==e&&(n+=r.value);return n}function viewResources(e){return F([e.resources,e.filterResourcesWithEvents,e._events,e._activeRange],(([e,t,n,r])=>{let o=e;t&&(o=e.filter((e=>{for(let t of n)if(t.display!=="background"&&t.resourceIds.includes(e.id)&&t.start<r.end&&t.end>r.start)return true;return false})));o.length||(o=createResources([{}]));return o}))}function createTimes(e,t,n,r){e=cloneDate(e);let o=t.seconds<3600;let a=[];let i=cloneDate(e);let l=1;addDuration(e,n.min);addDuration(i,n.max);while(e<i){a.push([toISOString(e),r.format(e),a.length&&(l||!o)]);addDuration(e,t);l=1-l}return a}function createSlotTimeLimits(e,n,r,o,a){let i=createDuration(e);let l=createDuration(n);if(r){let e=createDuration(min(toSeconds(i),max(0,toSeconds(l)-V)));let n=createDuration(max(toSeconds(l),toSeconds(e)+V));let s=t(r?.eventFilter)?r.eventFilter:e=>!bgEvent(e.display);e:for(let t of o){let r=addDuration(cloneDate(t),i);let o=addDuration(cloneDate(t),l);let c=addDuration(cloneDate(t),e);let u=addDuration(cloneDate(t),n);for(let d of a)if(!d.allDay&&s(d)&&d.start<u&&d.end>c){if(d.start<r){let n=max((d.start-t)/1e3,toSeconds(e));n<toSeconds(i)&&(i.seconds=n)}if(d.end>o){let e=min((d.end-t)/1e3,toSeconds(n));e>toSeconds(l)&&(l.seconds=e)}if(toSeconds(i)===toSeconds(e)&&toSeconds(l)===toSeconds(n))break e}}}return{min:i,max:l}}function createOptions(e){let t={allDayContent:void 0,allDaySlot:true,buttonText:{today:"today"},customButtons:{},date:new Date,datesSet:void 0,dayHeaderFormat:{weekday:"short",month:"numeric",day:"numeric"},dayHeaderAriaLabelFormat:{dateStyle:"full"},displayEventEnd:true,duration:{weeks:1},events:[],eventAllUpdated:void 0,eventBackgroundColor:void 0,eventTextColor:void 0,eventClassNames:void 0,eventClick:void 0,eventColor:void 0,eventContent:void 0,eventDidMount:void 0,eventMouseEnter:void 0,eventMouseLeave:void 0,eventSources:[],eventTimeFormat:{hour:"numeric",minute:"2-digit"},filterResourcesWithEvents:false,firstDay:0,flexibleSlotTimeLimits:false,headerToolbar:{start:"title",center:"",end:"today prev,next"},height:void 0,hiddenDays:[],highlightedDates:[],lazyFetching:true,loading:void 0,locale:void 0,nowIndicator:false,resourceLabelContent:void 0,resourceLabelDidMount:void 0,resources:[],selectable:false,scrollTime:"06:00:00",slotDuration:"00:30:00",slotEventOverlap:true,slotHeight:24,slotLabelFormat:{hour:"numeric",minute:"2-digit"},slotMaxTime:"24:00:00",slotMinTime:"00:00:00",slotWidth:72,theme:{allDay:"ec-all-day",active:"ec-active",bgEvent:"ec-bg-event",bgEvents:"ec-bg-events",body:"ec-body",button:"ec-button",buttonGroup:"ec-button-group",calendar:"ec",compact:"ec-compact",content:"ec-content",day:"ec-day",dayHead:"ec-day-head",days:"ec-days",event:"ec-event",eventBody:"ec-event-body",eventTime:"ec-event-time",eventTitle:"ec-event-title",events:"ec-events",extra:"ec-extra",handle:"ec-handle",header:"ec-header",hiddenScroll:"ec-hidden-scroll",highlight:"ec-highlight",icon:"ec-icon",line:"ec-line",lines:"ec-lines",nowIndicator:"ec-now-indicator",otherMonth:"ec-other-month",resource:"ec-resource",sidebar:"ec-sidebar",sidebarTitle:"ec-sidebar-title",today:"ec-today",time:"ec-time",title:"ec-title",toolbar:"ec-toolbar",view:"",weekdays:["ec-sun","ec-mon","ec-tue","ec-wed","ec-thu","ec-fri","ec-sat"],withScroll:"ec-with-scroll"},titleFormat:{year:"numeric",month:"short",day:"numeric"},view:void 0,viewDidMount:void 0,views:{}};for(let n of e)n.createOptions?.(t);return t}function createParsers(e){let t={date:e=>setMidnight(createDate(e)),duration:createDuration,events:createEvents,eventSources:createEventSources,hiddenDays:e=>[...new Set(e)],highlightedDates:e=>e.map((e=>setMidnight(createDate(e)))),resources:createResources,scrollTime:createDuration,slotDuration:createDuration,slotMaxTime:createDuration,slotMinTime:createDuration};for(let n of e)n.createParsers?.(t);return t}function diff(e,t){let n=[];for(let r of keys(e))e[r]!==t[r]&&n.push([r,e[r]]);assign(t,e);return n}function dayGrid(e){return F(e.view,(e=>e?.startsWith("dayGrid")))}function activeRange(e){return F([e._currentRange,e.firstDay,e.slotMaxTime,e._dayGrid],(([e,t,n,r])=>{let o=cloneDate(e.start);let a=cloneDate(e.end);if(r){prevClosestDay(o,t);nextClosestDay(a,t)}else if(n.days||n.seconds>V){addDuration(subtractDay(a),n);let e=subtractDay(cloneDate(a));e<o&&(o=e)}return{start:o,end:a}}))}function currentRange(e){return F([e.date,e.duration,e.firstDay],(([e,t,n])=>{let r,o=cloneDate(e);t.months?o.setUTCDate(1):t.inWeeks&&prevClosestDay(o,n);r=addDuration(cloneDate(o),t);return{start:o,end:r}}))}function viewDates(e){return F([e._activeRange,e.hiddenDays],(([t,n])=>{let r=[];let o=setMidnight(cloneDate(t.start));let a=setMidnight(cloneDate(t.end));while(o<a){n.includes(o.getUTCDay())||r.push(cloneDate(o));addDay(o)}if(!r.length&&n.length&&n.length<7){e.date.update((e=>{while(n.includes(e.getUTCDay()))addDay(e);return e}));r=W(e._viewDates)}return r}))}function viewTitle(e){return F([e.date,e._activeRange,e._intlTitle,e._dayGrid],(([e,t,n,r])=>r?n.formatRange(e,e):n.formatRange(t.start,subtractDay(cloneDate(t.end)))))}function view(e){return F([e.view,e._viewTitle,e._currentRange,e._activeRange],(e=>createView(...e)))}function events(e){let n=B([]);let r;let o=0;let a={};F([e.events,e.eventSources,e._activeRange,e._fetchedRange,e.lazyFetching,e.loading],((n,i)=>debounce((()=>{let[e,a,l,s,c,u]=n;if(a.length){if(!s.start||s.start>l.start||s.end<l.end||!c){r&&r.abort();r=new AbortController;t(u)&&!o&&u(true);let stopLoading=()=>{--o===0&&t(u)&&u(false)};let e=[];let failure=e=>stopLoading();let success=t=>{e=e.concat(createEvents(t));i(e);stopLoading()};let n=toISOString(l.start);let c=toISOString(l.end);for(let e of a){if(t(e.events)){let t=e.events({start:toLocalDate(l.start),end:toLocalDate(l.end),startStr:n,endStr:c},success,failure);t!==void 0&&Promise.resolve(t).then(success,failure)}else{let o=t(e.extraParams)?e.extraParams():assign({},e.extraParams);o.start=n;o.end=c;o=new URLSearchParams(o);let a,i=e.url,l={};if(["GET","HEAD"].includes(e.method))i+=(i.includes("?")?"&":"?")+o;else{l["content-type"]="application/x-www-form-urlencoded;charset=UTF-8";a=String(o)}fetch(i,{method:e.method,headers:l,body:a,signal:r.signal,credentials:"same-origin"}).then((e=>e.json())).then(success).catch(failure)}++o}s.start=l.start;s.end=l.end}}else i(e)}),a,e._queue)),[]).subscribe(n.set);return n}function now(){return N(createDate(),(e=>{let t=setInterval((()=>{e(createDate())}),1e3);return()=>clearInterval(t)}))}function today(e){return F(e._now,(e=>setMidnight(cloneDate(e))))}class State{constructor(e,o){e=e||[];let a=createOptions(e);let i=createParsers(e);a=parseOpts(a,i);o=parseOpts(o,i);for(let[e,t]of Object.entries(a))this[e]=B(t);this._queue=B(new Map);this._queue2=B(new Map);this._tasks=new Map;this._auxiliary=B([]);this._dayGrid=dayGrid(this);this._currentRange=currentRange(this);this._activeRange=activeRange(this);this._fetchedRange=B({start:void 0,end:void 0});this._events=events(this);this._now=now();this._today=today(this);this._intlEventTime=intlRange(this.locale,this.eventTimeFormat);this._intlSlotLabel=intl(this.locale,this.slotLabelFormat);this._intlDayHeader=intl(this.locale,this.dayHeaderFormat);this._intlDayHeaderAL=intl(this.locale,this.dayHeaderAriaLabelFormat);this._intlTitle=intlRange(this.locale,this.titleFormat);this._bodyEl=B(void 0);this._scrollable=B(false);this._viewTitle=viewTitle(this);this._viewDates=viewDates(this);this._view=view(this);this._viewComponent=B(void 0);this._interaction=B({});this._iEvents=B([null,null]);this._iClasses=B(n);this._iClass=B(void 0);this._set=(e,t)=>{if(validKey(e,this)){i[e]&&(t=i[e](t));this[e].set(t)}};this._get=e=>validKey(e,this)?W(this[e]):void 0;for(let t of e)t.createStores?.(this);o.view&&this.view.set(o.view);let l=new Set([...keys(a.views),...keys(o.views??{})]);for(let e of l){let n=mergeOpts(a,a.views[e]??{});let i=mergeOpts(n,o,o.views?.[e]??{});let l=i.component;filterOpts(i,this);for(let e of keys(i)){let{set:r,_set:o=r,...a}=this[e];this[e]={set:["buttonText","theme"].includes(e)?a=>{if(t(a)){let t=a(n[e]);i[e]=t;r(r===o?t:a)}else{i[e]=a;r(a)}}:t=>{i[e]=t;r(t)},_set:o,...a}}this.view.subscribe((n=>{if(n===e){this._viewComponent.set(l);t(i.viewDidMount)&&r().then((()=>i.viewDidMount(W(this._view))));for(let e of keys(i))this[e]._set(i[e])}}))}}}function parseOpts(e,t){let n={...e};for(let e of keys(t))e in n&&(n[e]=t[e](n[e]));if(e.views){n.views={};for(let r of keys(e.views))n.views[r]=parseOpts(e.views[r],t)}return n}function mergeOpts(...e){let n={};for(let r of e){let e={};for(let o of["buttonText","theme"])t(r[o])&&(e[o]=r[o](n[o]));n={...n,...r,...e}}return n}function filterOpts(e,t){keys(e).filter((e=>!validKey(e,t)||e=="view")).forEach((t=>delete e[t]))}function validKey(e,t){return t.hasOwnProperty(e)&&e[0]!=="_"}function get_each_context$2(e,t,n){const r=e.slice();r[25]=t[n];return r}function create_if_block_5(e){let t;let n=e[5][e[25]]+"";let r;let f;let h;let v;function click_handler_1(){return e[22](e[25])}return{c(){t=o("button");r=a(n);i(t,"class",f=e[3].button+(e[7]===e[25]?" "+e[3].active:"")+" ec-"+e[25])},m(e,n){l(e,t,n);s(t,r);if(!h){v=c(t,"click",click_handler_1);h=true}},p(o,a){e=o;a&33&&n!==(n=e[5][e[25]]+"")&&u(r,n);a&137&&f!==(f=e[3].button+(e[7]===e[25]?" "+e[3].active:"")+" ec-"+e[25])&&i(t,"class",f)},d(e){e&&d(t);h=false;v()}}}function create_if_block_4(n){let r;let a;let s;let u;let h;return{c(){r=o("button");i(r,"class",a=n[3].button+" ec-"+n[25]+(n[6][n[25]].active?" "+n[3].active:""))},m(e,o){l(e,r,o);if(!u){h=[c(r,"click",(function(){t(n[6][n[25]].click)&&n[6][n[25]].click.apply(this,arguments)})),f(s=setContent.call(null,r,n[6][n[25]].text))];u=true}},p(e,o){n=e;o&73&&a!==(a=n[3].button+" ec-"+n[25]+(n[6][n[25]].active?" "+n[3].active:""))&&i(r,"class",a);s&&t(s.update)&&o&65&&s.update.call(null,n[6][n[25]].text)},d(t){t&&d(r);u=false;e(h)}}}function create_if_block_3(e){let t;let n=e[5][e[25]]+"";let r;let f;let h;let v;return{c(){t=o("button");r=a(n);i(t,"class",f=e[3].button+" ec-"+e[25]);t.disabled=e[1]},m(n,o){l(n,t,o);s(t,r);if(!h){v=c(t,"click",e[21]);h=true}},p(e,o){o&33&&n!==(n=e[5][e[25]]+"")&&u(r,n);o&9&&f!==(f=e[3].button+" ec-"+e[25])&&i(t,"class",f);o&2&&(t.disabled=e[1])},d(e){e&&d(t);h=false;v()}}}function create_if_block_2(e){let t;let n;let r;let a;let u;let f;let h;let v;return{c(){t=o("button");n=o("i");i(n,"class",r=e[3].icon+" ec-"+e[25]);i(t,"class",a=e[3].button+" ec-"+e[25]);i(t,"aria-label",u=e[5].next);i(t,"title",f=e[5].next)},m(r,o){l(r,t,o);s(t,n);if(!h){v=c(t,"click",e[19]);h=true}},p(e,o){o&9&&r!==(r=e[3].icon+" ec-"+e[25])&&i(n,"class",r);o&9&&a!==(a=e[3].button+" ec-"+e[25])&&i(t,"class",a);o&32&&u!==(u=e[5].next)&&i(t,"aria-label",u);o&32&&f!==(f=e[5].next)&&i(t,"title",f)},d(e){e&&d(t);h=false;v()}}}function create_if_block_1(e){let t;let n;let r;let a;let u;let f;let h;let v;return{c(){t=o("button");n=o("i");i(n,"class",r=e[3].icon+" ec-"+e[25]);i(t,"class",a=e[3].button+" ec-"+e[25]);i(t,"aria-label",u=e[5].prev);i(t,"title",f=e[5].prev)},m(r,o){l(r,t,o);s(t,n);if(!h){v=c(t,"click",e[18]);h=true}},p(e,o){o&9&&r!==(r=e[3].icon+" ec-"+e[25])&&i(n,"class",r);o&9&&a!==(a=e[3].button+" ec-"+e[25])&&i(t,"class",a);o&32&&u!==(u=e[5].prev)&&i(t,"aria-label",u);o&32&&f!==(f=e[5].prev)&&i(t,"title",f)},d(e){e&&d(t);h=false;v()}}}function create_if_block$1(e){let n;let r;let a;let s;let c;return{c(){n=o("h2");i(n,"class",r=e[3].title)},m(t,r){l(t,n,r);if(!s){c=f(a=setContent.call(null,n,e[4]));s=true}},p(e,o){o&8&&r!==(r=e[3].title)&&i(n,"class",r);a&&t(a.update)&&o&16&&a.update.call(null,e[4])},d(e){e&&d(n);s=false;c()}}}function create_each_block$2(e){let t;function select_block_type(e,t){return e[25]=="title"?create_if_block$1:e[25]=="prev"?create_if_block_1:e[25]=="next"?create_if_block_2:e[25]=="today"?create_if_block_3:e[6][e[25]]?create_if_block_4:e[25]!=""?create_if_block_5:void 0}let n=select_block_type(e);let r=n&&n(e);return{c(){r&&r.c();t=h()},m(e,n){r&&r.m(e,n);l(e,t,n)},p(e,o){if(n===(n=select_block_type(e))&&r)r.p(e,o);else{r&&r.d(1);r=n&&n(e);if(r){r.c();r.m(t.parentNode,t)}}},d(e){e&&d(t);r&&r.d(e)}}}function create_fragment$3(e){let t;let n=v(e[0]);let r=[];for(let t=0;t<n.length;t+=1)r[t]=create_each_block$2(get_each_context$2(e,n,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=h()},m(e,n){for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,n);l(e,t,n)},p(e,[o]){if(o&917759){n=v(e[0]);let a;for(a=0;a<n.length;a+=1){const i=get_each_context$2(e,n,a);if(r[a])r[a].p(i,o);else{r[a]=create_each_block$2(i);r[a].c();r[a].m(t.parentNode,t)}}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length}},i:g,o:g,d(e){e&&d(t);m(r,e)}}}function instance$3(e,t,n){let r;let o;let a;let i;let l;let s;let c;let u;let d;let{buttons:f}=t;let{_currentRange:h,_viewTitle:v,buttonText:g,customButtons:m,date:y,duration:D,hiddenDays:b,theme:w,view:E}=P("state");p(e,h,(e=>n(20,i=e)));p(e,v,(e=>n(4,s=e)));p(e,g,(e=>n(5,c=e)));p(e,m,(e=>n(6,u=e)));p(e,y,(e=>n(2,o=e)));p(e,D,(e=>n(23,r=e)));p(e,b,(e=>n(24,a=e)));p(e,w,(e=>n(3,l=e)));p(e,E,(e=>n(7,d=e)));let $,T=setMidnight(createDate());function prev(){_(y,o=prevDate(o,r,a),o)}function next(){_(y,o=nextDate(o,r),o)}const click_handler=()=>_(y,o=cloneDate(T),o);const click_handler_1=e=>_(E,d=e,d);e.$$set=e=>{"buttons"in e&&n(0,f=e.buttons)};e.$$.update=()=>{e.$$.dirty&1048576&&n(1,$=T>=i.start&&T<i.end||null)};return[f,$,o,l,s,c,u,d,h,v,g,m,y,D,b,w,E,T,prev,next,i,click_handler,click_handler_1]}class Buttons extends y{constructor(e){super();D(this,e,instance$3,create_fragment$3,b,{buttons:0})}}function get_each_context$1(e,t,n){const r=e.slice();r[5]=t[n];return r}function get_each_context_1(e,t,n){const r=e.slice();r[8]=t[n];return r}function create_else_block(e){let t;let n;t=new Buttons({props:{buttons:e[8]}});return{c(){w(t.$$.fragment)},m(e,r){E(t,e,r);n=true},p(e,n){const r={};n&1&&(r.buttons=e[8]);t.$set(r)},i(e){if(!n){$(t.$$.fragment,e);n=true}},o(e){T(t.$$.fragment,e);n=false},d(e){x(t,e)}}}function create_if_block(e){let t;let n;let r;let a;n=new Buttons({props:{buttons:e[8]}});return{c(){t=o("div");w(n.$$.fragment);i(t,"class",r=e[1].buttonGroup)},m(e,r){l(e,t,r);E(n,t,null);a=true},p(e,o){const l={};o&1&&(l.buttons=e[8]);n.$set(l);(!a||o&2&&r!==(r=e[1].buttonGroup))&&i(t,"class",r)},i(e){if(!a){$(n.$$.fragment,e);a=true}},o(e){T(n.$$.fragment,e);a=false},d(e){e&&d(t);x(n)}}}function create_each_block_1(e){let t;let n;let r;let o;const a=[create_if_block,create_else_block];const i=[];function select_block_type(e,t){return e[8].length>1?0:1}t=select_block_type(e);n=i[t]=a[t](e);return{c(){n.c();r=h()},m(e,n){i[t].m(e,n);l(e,r,n);o=true},p(e,o){let l=t;t=select_block_type(e);if(t===l)i[t].p(e,o);else{k();T(i[l],1,1,(()=>{i[l]=null}));C();n=i[t];if(n)n.p(e,o);else{n=i[t]=a[t](e);n.c()}$(n,1);n.m(r.parentNode,r)}},i(e){if(!o){$(n);o=true}},o(e){T(n);o=false},d(e){e&&d(r);i[t].d(e)}}}function create_each_block$1(e){let t;let n;let r;let a;let c=v(e[0][e[5]]);let u=[];for(let t=0;t<c.length;t+=1)u[t]=create_each_block_1(get_each_context_1(e,c,t));const out=e=>T(u[e],1,1,(()=>{u[e]=null}));return{c(){t=o("div");for(let e=0;e<u.length;e+=1)u[e].c();n=S();i(t,"class",r="ec-"+e[5])},m(e,r){l(e,t,r);for(let e=0;e<u.length;e+=1)u[e]&&u[e].m(t,null);s(t,n);a=true},p(e,o){if(o&3){c=v(e[0][e[5]]);let r;for(r=0;r<c.length;r+=1){const a=get_each_context_1(e,c,r);if(u[r]){u[r].p(a,o);$(u[r],1)}else{u[r]=create_each_block_1(a);u[r].c();$(u[r],1);u[r].m(t,n)}}k();for(r=c.length;r<u.length;r+=1)out(r);C()}(!a||o&1&&r!==(r="ec-"+e[5]))&&i(t,"class",r)},i(e){if(!a){for(let e=0;e<c.length;e+=1)$(u[e]);a=true}},o(e){u=u.filter(Boolean);for(let e=0;e<u.length;e+=1)T(u[e]);a=false},d(e){e&&d(t);m(u,e)}}}function create_fragment$2(e){let t;let n;let r;let a=v(keys(e[0]));let s=[];for(let t=0;t<a.length;t+=1)s[t]=create_each_block$1(get_each_context$1(e,a,t));const out=e=>T(s[e],1,1,(()=>{s[e]=null}));return{c(){t=o("nav");for(let e=0;e<s.length;e+=1)s[e].c();i(t,"class",n=e[1].toolbar)},m(e,n){l(e,t,n);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(t,null);r=true},p(e,[o]){if(o&3){a=v(keys(e[0]));let n;for(n=0;n<a.length;n+=1){const r=get_each_context$1(e,a,n);if(s[n]){s[n].p(r,o);$(s[n],1)}else{s[n]=create_each_block$1(r);s[n].c();$(s[n],1);s[n].m(t,null)}}k();for(n=a.length;n<s.length;n+=1)out(n);C()}(!r||o&2&&n!==(n=e[1].toolbar))&&i(t,"class",n)},i(e){if(!r){for(let e=0;e<a.length;e+=1)$(s[e]);r=true}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)T(s[e]);r=false},d(e){e&&d(t);m(s,e)}}}function instance$2(e,t,n){let r;let o;let{headerToolbar:a,theme:i}=P("state");p(e,a,(e=>n(4,r=e)));p(e,i,(e=>n(1,o=e)));let l={start:[],center:[],end:[]};e.$$.update=()=>{if(e.$$.dirty&17)for(let e of keys(l))n(0,l[e]=r[e].split(" ").map((e=>e.split(","))),l)};return[l,o,a,i,r]}class Toolbar extends y{constructor(e){super();D(this,e,instance$2,create_fragment$2,b,{})}}function get_each_context(e,t,n){const r=e.slice();r[11]=t[n];return r}function create_each_block(e){let t;let n;let r;var o=e[11];function switch_props(e,t){return{}}o&&(t=L(o,switch_props()));return{c(){t&&w(t.$$.fragment);n=h()},m(e,o){t&&E(t,e,o);l(e,n,o);r=true},p(e,r){if(r&1&&o!==(o=e[11])){if(t){k();const e=t;T(e.$$.fragment,1,0,(()=>{x(e,1)}));C()}if(o){t=L(o,switch_props());w(t.$$.fragment);$(t.$$.fragment,1);E(t,n.parentNode,n)}else t=null}},i(e){if(!r){t&&$(t.$$.fragment,e);r=true}},o(e){t&&T(t.$$.fragment,e);r=false},d(e){e&&d(n);t&&x(t,e)}}}function create_fragment$1(e){let t;let n;let r=v(e[0]);let o=[];for(let t=0;t<r.length;t+=1)o[t]=create_each_block(get_each_context(e,r,t));const out=e=>T(o[e],1,1,(()=>{o[e]=null}));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=h()},m(e,r){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,r);l(e,t,r);n=true},p(e,[n]){if(n&1){r=v(e[0]);let a;for(a=0;a<r.length;a+=1){const i=get_each_context(e,r,a);if(o[a]){o[a].p(i,n);$(o[a],1)}else{o[a]=create_each_block(i);o[a].c();$(o[a],1);o[a].m(t.parentNode,t)}}k();for(a=r.length;a<o.length;a+=1)out(a);C()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)$(o[e]);n=true}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)T(o[e]);n=false},d(e){e&&d(t);m(o,e)}}}function instance$1(e,n,r){let o;let a;let i;let l;let{datesSet:s,_auxiliary:c,_activeRange:u,_queue:d,_view:f}=P("state");p(e,s,(e=>r(7,a=e)));p(e,c,(e=>r(0,l=e)));p(e,u,(e=>r(5,i=e)));p(e,f,(e=>r(6,o=e)));let h={};function runDatesSet(e){t(a)&&debounce((()=>a({start:toLocalDate(e.start),end:toLocalDate(e.end),startStr:toISOString(e.start),endStr:toISOString(e.end),view:toViewWithLocalDates(o)})),h,d)}e.$$.update=()=>{e.$$.dirty&32&&runDatesSet(i)};return[l,s,c,u,f,i]}class Auxiliary extends y{constructor(e){super();D(this,e,instance$1,create_fragment$1,b,{})}}function create_fragment(e){let t;let n;let r;let a;let u;let f;let h;let v;let g;let m;let p;n=new Toolbar({});var _=e[5];function switch_props(e,t){return{}}_&&(a=L(_,switch_props()));v=new Auxiliary({});return{c(){t=o("div");w(n.$$.fragment);r=S();a&&w(a.$$.fragment);h=S();w(v.$$.fragment);i(t,"class",u=e[1].calendar+" "+e[1].view+(e[0]?" "+e[1].withScroll:"")+(e[2]?" "+e[1][e[2]]:""));i(t,"role",f=listView(e[4])?"list":"table");R(t,"height",e[3])},m(o,i){l(o,t,i);E(n,t,null);s(t,r);a&&E(a,t,null);l(o,h,i);E(v,o,i);g=true;if(!m){p=c(window,"resize",e[20]);m=true}},p(e,n){if(n[0]&32&&_!==(_=e[5])){if(a){k();const e=a;T(e.$$.fragment,1,0,(()=>{x(e,1)}));C()}if(_){a=L(_,switch_props());w(a.$$.fragment);$(a.$$.fragment,1);E(a,t,null)}else a=null}(!g||n[0]&7&&u!==(u=e[1].calendar+" "+e[1].view+(e[0]?" "+e[1].withScroll:"")+(e[2]?" "+e[1][e[2]]:"")))&&i(t,"class",u);(!g||n[0]&16&&f!==(f=listView(e[4])?"list":"table"))&&i(t,"role",f);n[0]&8&&R(t,"height",e[3])},i(e){if(!g){$(n.$$.fragment,e);a&&$(a.$$.fragment,e);$(v.$$.fragment,e);g=true}},o(e){T(n.$$.fragment,e);a&&T(a.$$.fragment,e);T(v.$$.fragment,e);g=false},d(e){if(e){d(t);d(h)}x(n);a&&x(a);x(v,e);m=false;p()}}}function instance(e,t,n){let r;let o;let a;let i;let l;let s;let c;let u;let d;let f;let h;let v;let g;let m;let{plugins:y=[]}=t;let{options:D={}}=t;let b=M();let w=new State(y,D);U("state",w);let{_viewComponent:E,_bodyEl:$,_interaction:T,_iClass:k,_events:C,_queue:S,_queue2:L,_tasks:R,_scrollable:P,date:F,duration:B,hiddenDays:N,height:V,theme:A,view:H}=w;p(e,E,(e=>n(5,m=e)));p(e,$,(e=>n(37,r=e)));p(e,T,(e=>n(43,u=e)));p(e,k,(e=>n(2,h=e)));p(e,C,(e=>n(44,d=e)));p(e,S,(e=>n(39,i=e)));p(e,L,(e=>n(38,a=e)));p(e,P,(e=>n(0,o=e)));p(e,F,(e=>n(42,c=e)));p(e,B,(e=>n(41,s=e)));p(e,N,(e=>n(40,l=e)));p(e,V,(e=>n(3,v=e)));p(e,A,(e=>n(1,f=e)));p(e,H,(e=>n(4,g=e)));let q={...D};function setOption(e,t){w._set(e,t);return this}function getOption(e){let t=w._get(e);return t instanceof Date?toLocalDate(t):t}function refetchEvents(){w._fetchedRange.set({start:void 0,end:void 0});return this}function getEvents(){return d.map(toEventWithLocalDates)}function getEventById(e){for(let t of d)if(t.id==e)return toEventWithLocalDates(t);return null}function addEvent(e){e=createEvents([e])[0];d.push(e);C.set(d);return e}function updateEvent(e){for(let t of d)if(t.id==e.id){e=createEvents([e])[0];assign(t,e);C.set(d);return e}return null}function removeEventById(e){let t=d.findIndex((t=>t.id==e));if(t>=0){d.splice(t,1);C.set(d)}return this}function getView(){return toViewWithLocalDates(W(w._view))}function unselect(){u.action?.unselect();return this}function dateFromPoint(e,t){let n=getElementWithPayload(e,t);if(n){let r=getPayload(n)(e,t);r.date=toLocalDate(r.date);return r}return null}function destroy(){x(b,true)}function next(){_(F,c=nextDate(c,s),c);return this}function prev(){_(F,c=prevDate(c,s,l),c);return this}O((()=>{flushDebounce(i)}));I((()=>{flushDebounce(a);task(recheckScrollable,null,R)}));function recheckScrollable(){r&&_(P,o=hasYScroll(r),o)}e.$$set=e=>{"plugins"in e&&n(21,y=e.plugins);"options"in e&&n(22,D=e.options)};e.$$.update=()=>{if(e.$$.dirty[0]&4194304)for(let[e,t]of diff(D,q))setOption(e,t)};return[o,f,h,v,g,m,E,$,T,k,C,S,L,P,F,B,N,V,A,H,recheckScrollable,y,D,setOption,getOption,refetchEvents,getEvents,getEventById,addEvent,updateEvent,removeEventById,getView,unselect,dateFromPoint,destroy,next,prev]}class Calendar extends y{constructor(e){super();D(this,e,instance,create_fragment,b,{plugins:21,options:22,setOption:23,getOption:24,refetchEvents:25,getEvents:26,getEventById:27,addEvent:28,updateEvent:29,removeEventById:30,getView:31,unselect:32,dateFromPoint:33,destroy:34,next:35,prev:36},null,[-1,-1])}get setOption(){return this.$$.ctx[23]}get getOption(){return this.$$.ctx[24]}get refetchEvents(){return this.$$.ctx[25]}get getEvents(){return this.$$.ctx[26]}get getEventById(){return this.$$.ctx[27]}get addEvent(){return this.$$.ctx[28]}get updateEvent(){return this.$$.ctx[29]}get removeEventById(){return this.$$.ctx[30]}get getView(){return this.$$.ctx[31]}get unselect(){return this.$$.ctx[32]}get dateFromPoint(){return this.$$.ctx[33]}get destroy(){return this.$$.ctx[34]}get next(){return this.$$.ctx[35]}get prev(){return this.$$.ctx[36]}}export{V as DAY_IN_SECONDS,addDay,addDuration,ancestor,assign,bgEvent,btnTextDay,btnTextMonth,btnTextWeek,btnTextYear,ceil,cloneDate,cloneEvent,copyTime,createDate,createDuration,createElement,createEventChunk,createEventClasses,createEventContent,createEventSources,createEvents,createResources,createSlotTimeLimits,createTimes,createView,datesEqual,debounce,Calendar as default,eventIntersects,floor,flushDebounce,getElementWithPayload,getPayload,ghostEvent,hasPayload,hasYScroll,height,helperEvent,intl,intlRange,isArray,keyEnter,keys,listView,max,min,nextClosestDay,nextDate,noTimePart,outsideEvent,pointerEvent,prepareEventChunks,prevClosestDay,prevDate,previewEvent,rect,repositionEvent,resourceBackgroundColor,resourceTextColor,runReposition,setContent,setMidnight,setPayload,sortEventChunks,subtractDay,subtractDuration,symbol,task,themeView,timelineView,toEventWithLocalDates,toISOString,toLocalDate,toSeconds,toViewWithLocalDates,viewResources};

